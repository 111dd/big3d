# Cloudflare Workers + D1 + R2 for BIG 3D - Production
# https://developers.cloudflare.com/workers/
# Deploy from worker/: cd worker && wrangler deploy

name = "big3d"
main = "index.js"
compatibility_date = "2024-01-01"

# Production URL: https://big3d.111dordavid.workers.dev
# Workers & Pages → big3d → Settings → Domains → Add Custom Domain

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "big3d-db"
database_id = "2da6b712-a288-4985-9a3a-69a9d685bc8f"

# R2 Storage for images
[[r2_buckets]]
binding = "BUCKET"
bucket_name = "big3d-images"

# ADMIN_API_KEY: set via Dashboard (Workers → big3d → Settings → Secrets)
# or: wrangler secret put ADMIN_API_KEY

[vars]
# Production CORS - only these origins allowed. No wildcards.
ALLOWED_ORIGINS = "https://big3d.pages.dev,https://big3d.co.il,https://www.big3d.co.il"
